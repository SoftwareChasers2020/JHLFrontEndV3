<app-add-annonce></app-add-annonce>
<br><br>
<div class="row">
  <!-- Earnings (Monthly) Card Example -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-primary shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">En attente</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">{{enAttente}} Colis</div>
          </div>
          <div class="col-auto">
            <i class="fas fa-cubes fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Earnings (Monthly) Card Example -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-danger shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Retour</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">{{retour}} Colis</div>
          </div>
          <div class="col-auto">
            <i class="fas fa-cubes fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Earnings (Monthly) Card Example -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-info shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
              En cours
            </div>
            <div class="row no-gutters align-items-center">
              <div class="col-auto">
                <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">{{enCours}} Colis</div>
              </div>
              <!--        <div class="col">
                        <div class="progress progress-sm mr-2">
                          <div class="progress-bar bg-info" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>-->
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-cubes fa-2x text-gray-300"></i></div>
        </div>
      </div>
    </div>
  </div>
  <!-- Pending Requests Card Example -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-success shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Livré</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">{{livre}} Colis</div>
          </div>
          <div class="col-auto">
            <i class="fas fa-cubes fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>


</div>







<div class="example-header" fxLayout="row">
  <div class="search-div">
    <!--   <button mat-raised-button (click)="print()" title="Print">
          <mat-icon>add</mat-icon>Ajouter
        </button>-->
    <mat-form-field style="width: 50%; float: top"  >
      <input  matInput [(ngModel)]="searchKey"   placeholder="Rechercher" autocomplete="off" (keyup)="getPageBySearchKey(currentSelectedPage)">
      <button mat-button matSuffix mat-icon-button aria-label="Clear" *ngIf="searchKey"  (click)="onSearchClear()">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>

  </div>
</div>
<div class="example-container mat-elevation-z8">
  <mat-table  [dataSource]="dataSource" matSort >
    <!-- ID Column -->
    <ng-container matColumnDef="Code">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Code </mat-header-cell>
      <mat-cell *matCellDef="let row" data-label="Code"> {{row.codeBarre}} </mat-cell>
    </ng-container>
    <!-- ID Column -->


    <ng-container matColumnDef="date_ajout">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Date d'ajout </mat-header-cell>
      <mat-cell *matCellDef="let row" data-label="Date d'ajout" > {{row.date_ajout | date:'yyyy-MM-dd' }} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="date_livraison"  >
      <mat-header-cell *matHeaderCellDef mat-sort-header > date_livraison </mat-header-cell>
      <mat-cell *matCellDef="let row" data-label="date_livraison"  > {{row.date_livraison | date:'yyyy-MM-dd' }} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="Nom">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Nom et Prénom </mat-header-cell>
      <mat-cell *matCellDef="let row" data-label="Nom"> {{row.client.nom}} {{row.client.prenom}} </mat-cell>
    </ng-container>


    <ng-container matColumnDef="Téléphone">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Téléphone </mat-header-cell>
      <mat-cell *matCellDef="let row" data-label="Téléphone" > {{row.client.tel1}} <br> {{row.client.tel2}} </mat-cell>
    </ng-container>


    <ng-container matColumnDef="Gouvernorat">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Gouvernorat </mat-header-cell>
      <!-- <mat-cell *matCellDef="let row" data-label="Adresse" > {{getvillebyId(row.idVille) | json}} </mat-cell>-->
      <mat-cell *matCellDef="let row" data-label="Gouvernorat" > {{row.nomgouvernorat}} </mat-cell>
    </ng-container>
    <ng-container matColumnDef="Ville">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Ville </mat-header-cell>
      <!-- <mat-cell *matCellDef="let row" data-label="Adresse" > {{getvillebyId(row.idVille) | json}} </mat-cell>-->
      <mat-cell *matCellDef="let row" data-label="Ville" > {{row.nomville}} </mat-cell>
    </ng-container>


    <ng-container matColumnDef="Prix">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Prix en DT </mat-header-cell>
      <mat-cell *matCellDef="let row" data-label="Prix"> {{row.prix | number :'1.3'}} </mat-cell>
    </ng-container>

    <ng-container  matColumnDef="Etat">
      <mat-header-cell *matHeaderCellDef mat-sort-header> Etat </mat-header-cell>
      <mat-cell  *matCellDef="let row" data-label="Etat">
        <div *ngIf='row.idEtat==="En attente de ramassage"'>
          <span class="badge badge-pill badge-warning" style="font-size:small ">{{row.idEtat}}</span>
        </div>

        <div *ngIf='row.idEtat==="En Cours" || row.idEtat==="En Route" || row.idEtat==="A Vérifier" || row.idEtat==="En Dépot" '>
          <span class="badge badge-pill badge-primary" style="font-size: small">En Cours</span>
        </div>
        <div *ngIf='row.idEtat==="Livré"'>
          <span class="badge badge-pill badge-success" style="font-size: small">{{row.idEtat}}</span>
        </div>
        <div *ngIf='row.idEtat==="Refusé"'>
          <span class="badge badge-pill badge-danger" style="font-size: small">{{row.idEtat}}</span>
        </div>
        <div *ngIf='row.idEtat==="Retour"'>
          <span class="badge badge-pill badge-danger" style="font-size: small">{{row.idEtat}}</span>
        </div>
        <div *ngIf='row.idEtat==="Retour Fournisseur"'>
          <span class="badge badge-pill RetourFournisseur" style="font-size: small">{{row.idEtat}}</span>
        </div>

      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>


  </mat-table>
  <div class="col-12 justify-content-center">
  <ngb-pagination class="test" [collectionSize]=totalPages*10 [maxSize]="5" [(page)]=page (pageChange)="getPaginationWithIndex(page)"  ></ngb-pagination>
  <!--<mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>-->
</div>
</div>

